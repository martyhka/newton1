<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Второй закон Ньютона - Тесты по физике</title>
    <style>
      body {
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 20px;
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #667eea 100%
        );
        min-height: 100%;
        color: #ecf0f1;
      }

      html {
        height: 100%;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      h1 {
        text-align: center;
        color: white;
        font-size: 2.5rem;
        margin-bottom: 40px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .student-info {
        background: rgba(102, 126, 234, 0.8);
        border: 1px solid rgba(236, 240, 241, 0.1);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 30px;
        text-align: center;
      }

      .student-name {
        font-size: 1.3rem;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .topic-section {
        display: flex;
        justify-content: center;
        gap: 40px;
        margin-bottom: 50px;
        flex-wrap: wrap;
      }

      .topic-card {
        background: rgba(102, 126, 234, 0.8);
        border: 1px solid rgba(236, 240, 241, 0.1);
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        transition: transform 0.3s ease;
        max-width: 500px;
        width: 100%;
      }

      .topic-card:hover {
        transform: translateY(-5px);
      }

      .topic-title {
        font-size: 1.4rem;
        font-weight: bold;
        margin-bottom: 20px;
        text-align: center;
        color: #ecf0f1;
        border-bottom: 2px solid rgba(236, 240, 241, 0.2);
        padding-bottom: 10px;
      }

      .formula-box {
        background: rgba(118, 75, 162, 0.6);
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 20px;
        text-align: center;
        border: 1px solid rgba(236, 240, 241, 0.1);
      }

      .formula {
        font-size: 1.2rem;
        font-weight: bold;
        color: #fff;
      }

      .formula-description {
        font-size: 0.9rem;
        color: #bdc3c7;
        margin-top: 5px;
      }

      .test-links {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .test-button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #ecf0f1;
        border: 1px solid rgba(236, 240, 241, 0.2);
        padding: 15px 25px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 500;
        transition: all 0.3s ease;
        text-align: left;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
        position: relative;
      }

      .test-button:hover {
        transform: translateX(5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        border-color: rgba(236, 240, 241, 0.4);
      }

      .test-button.active {
        background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        border-color: #48bb78;
      }

      .test-button.completed {
        background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
        border-color: #27ae60;
      }

      .test-status {
        position: absolute;
        top: -5px;
        right: -5px;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #27ae60;
        color: white;
        font-size: 12px;
        display: none;
        align-items: center;
        justify-content: center;
        font-weight: bold;
      }

      .test-button.completed .test-status {
        display: flex;
      }

      .arrow {
        transition: transform 0.3s ease;
      }

      .test-button.active .arrow {
        transform: rotate(90deg);
      }

      .test-content {
        background: rgba(102, 126, 234, 0.9);
        border: 1px solid rgba(236, 240, 241, 0.1);
        margin: 20px 0;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        display: none;
        animation: slideDown 0.3s ease;
      }

      .test-content.active {
        display: block;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .test-title {
        font-size: 1.5rem;
        font-weight: bold;
        margin-bottom: 25px;
        text-align: center;
        color: #ecf0f1;
        border-bottom: 2px solid rgba(236, 240, 241, 0.2);
        padding-bottom: 10px;
      }

      .question {
        background: rgba(118, 75, 162, 0.6);
        border-left: 4px solid #48bb78;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 0 10px 10px 0;
        border: 1px solid rgba(236, 240, 241, 0.1);
      }

      .question-text {
        font-size: 1.1rem;
        margin-bottom: 15px;
        font-weight: 500;
        line-height: 1.5;
      }

      .answer-input {
        width: 100%;
        max-width: 200px;
        padding: 12px 15px;
        border: 2px solid rgba(236, 240, 241, 0.3);
        border-radius: 8px;
        font-size: 1rem;
        background: rgba(118, 75, 162, 0.8);
        color: #ecf0f1;
        transition: border-color 0.3s ease;
      }

      .answer-input:focus {
        outline: none;
        border-color: #48bb78;
        box-shadow: 0 0 0 3px rgba(72, 187, 120, 0.2);
      }

      .answer-input::placeholder {
        color: rgba(236, 240, 241, 0.6);
      }

      .answer-input:disabled {
        opacity: 0.7;
        cursor: not-allowed;
      }

      .check-button {
        background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1.1rem;
        font-weight: 600;
        margin: 20px auto;
        display: block;
        transition: all 0.3s ease;
      }

      .check-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(72, 187, 120, 0.4);
      }

      .check-button:disabled {
        background: #95a5a6;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .result {
        text-align: center;
        font-size: 1.3rem;
        font-weight: bold;
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
        display: none;
      }

      .result.show {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .grade-2 {
        background: #ffebee;
        color: #c62828;
      }
      .grade-3 {
        background: #fed7d7;
        color: #c53030;
      }
      .grade-4 {
        background: #feebc8;
        color: #dd6b20;
      }
      .grade-5 {
        background: #c6f6d5;
        color: #024622;
      }

      .progress-report {
        background: rgba(102, 126, 234, 0.9);
        border: 1px solid rgba(1, 27, 34, 0.1);
        border-radius: 15px;
        padding: 30px;
        margin-top: 50px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .progress-title {
        font-size: 2rem;
        font-weight: bold;
        text-align: center;
        margin-bottom: 30px;
        color: #67f762;
        border-bottom: 2px solid rgba(1, 17, 20, 0.2);
        padding-bottom: 15px;
      }

      .progress-section {
        margin-bottom: 30px;
      }

      .progress-section h3 {
        font-size: 1.3rem;
        margin-bottom: 15px;
        color: #0b1601;
      }

      .progress-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 18px;
        margin-bottom: 10px;
        background: rgba(53, 29, 29, 0.6);
        border-radius: 8px;
        border-left: 4px solid transparent;
      }

      .progress-item.completed {
        border-left-color: #27ae60;
      }

      .progress-item.not-completed {
        border-left-color: #95a5a6;
        opacity: 0.7;
      }

      .progress-grade {
        font-weight: bold;
        padding: 6px 12px;
        border-radius: 5px;
        min-width: 40px;
        text-align: center;
      }

      .grade-badge-2 {
        background: #c62828;
        color: white;
      }
      .grade-badge-3 {
        background: #c53030;
        color: white;
      }
      .grade-badge-4 {
        background: #dd6b20;
        color: white;
      }
      .grade-badge-5 {
        background: #38a169;
        color: white;
      }

      .overall-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }

      .stat-card {
        background: rgba(29, 23, 39, 0.6);
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        border: 1px solid rgba(236, 240, 241, 0.1);
      }

      .stat-number {
        font-size: 2rem;
        font-weight: bold;
        color: #48bb78;
      }

      .stat-label {
        font-size: 0.9rem;
        color: #bdc3c7;
        margin-top: 5px;
      }

      @media (max-width: 768px) {
        .topic-section {
          flex-direction: column;
          align-items: center;
        }

        h1 {
          font-size: 2rem;
        }

        .container {
          padding: 0 10px;
        }

        .overall-stats {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>⚡ Второй закон Ньютона - Тесты по физике</h1>

      <div class="student-info">
        <div class="student-name">
          Ученик: <span id="studentName">Привет умникам и умницам!</span>
        </div>
        <div>Класс: 9 | Дата: <span id="currentDate"></span></div>
      </div>

      <div class="topic-section">
        <div class="topic-card">
          <div class="topic-title">Движение под действием силы</div>
          <div class="formula-box">
            <div class="formula">F = ma</div>
            <div class="formula-description">
              где F - сила (Н), m - масса (кг), a - ускорение (м/с²)
            </div>
          </div>
          <div class="formula-box">
            <div class="formula">v = at</div>
            <div class="formula-description">
              где v - скорость (м/с), a - ускорение (м/с²), t - время (с)
            </div>
          </div>
          <div class="test-links">
            <button class="test-button" onclick="toggleTest('test1')">
              <span>Тест №1 - Поиск массы, силы, ускорения</span>
              <span class="arrow">▶</span>
              <span class="test-status">✓</span>
            </button>
            <button class="test-button" onclick="toggleTest('test2')">
              <span>Тест №2 - Большие единицы измерения</span>
              <span class="arrow">▶</span>
              <span class="test-status">✓</span>
            </button>
          </div>
        </div>

        <div class="topic-card">
          <div class="topic-title">Торможение и остановка</div>
          <div class="formula-box">
            <div class="formula">F = ma</div>
            <div class="formula-description">
              При торможении ускорение отрицательное
            </div>
          </div>
          <div class="formula-box">
            <div class="formula">v = v₀ + at</div>
            <div class="formula-description">
              где v₀ - начальная скорость, v - конечная скорость
            </div>
          </div>
          <div class="test-links">
            <button class="test-button" onclick="toggleTest('test3')">
              <span>Тест №3 - Спортивные задачи</span>
              <span class="arrow">▶</span>
              <span class="test-status">✓</span>
            </button>
            <button class="test-button" onclick="toggleTest('test4')">
              <span>Тест №4 - Космические задачи</span>
              <span class="arrow">▶</span>
              <span class="test-status">✓</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Тест 1: Основные задачи -->
      <div class="test-content" id="test1">
        <div class="test-title">Тест №1 - Поиск массы, силы и ускорения</div>

        <div class="question">
          <div class="question-text">
            1. Футбольный мяч получает ускорение 15 м/с² под действием силы 6 Н.
            Найдите массу мяча.
          </div>
          <input
            type="number"
            step="0.01"
            class="answer-input"
            id="q1_1"
            placeholder="m = ? кг"
          />
        </div>

        <div class="question">
          <div class="question-text">
            2. Санки массой 8 кг движутся с ускорением 2,5 м/с². Какая сила
            действует на санки?
          </div>
          <input
            type="number"
            step="0.1"
            class="answer-input"
            id="q1_2"
            placeholder="F = ? Н"
          />
        </div>

        <div class="question">
          <div class="question-text">
            3. На велосипедиста массой 70 кг действует сила 140 Н. Найдите
            ускорение.
          </div>
          <input
            type="number"
            step="0.1"
            class="answer-input"
            id="q1_3"
            placeholder="a = ? м/с²"
          />
        </div>

        <div class="question">
          <div class="question-text">
            4. Книга лежит на столе. При толчке она получает ускорение 3 м/с²
            под действием силы 4,5 Н. Какова масса книги?
          </div>
          <input
            type="number"
            step="0.1"
            class="answer-input"
            id="q1_4"
            placeholder="m = ? кг"
          />
        </div>

        <div class="question">
          <div class="question-text">
            5. Тележка массой 15 кг разгоняется с ускорением 1,2 м/с². Найдите
            силу тяги.
          </div>
          <input
            type="number"
            step="0.1"
            class="answer-input"
            id="q1_5"
            placeholder="F = ? Н"
          />
        </div>

        <button
          class="check-button"
          onclick="checkTest('test1', [0.4, 20, 2, 1.5, 18])"
        >
          Проверить тест
        </button>
        <div class="result" id="result1"></div>
      </div>

      <!-- Тест 2: Большие силы -->
      <div class="test-content" id="test2">
        <div class="test-title">
          Тест №2 - Задачи с большими единицами (кН, МН, тонны, граммы)
        </div>

        <div class="question">
          <div class="question-text">
            1. Корабль получает ускорение 0,5 м/с² под действием силы тяги 2,5
            МН. Найдите массу корабля в тоннах. (1 МН = 1000000 Н, 1 т = 1000
            кг)
          </div>
          <input
            type="number"
            step="1"
            class="answer-input"
            id="q2_1"
            placeholder="m = ? т"
          />
        </div>

        <div class="question">
          <div class="question-text">
            2. Пуля массой 10 г движется с ускорением 50000 м/с². Какая сила
            действует на пулю? Ответ в Н. (1 г = 0,001 кг)
          </div>
          <input
            type="number"
            step="1"
            class="answer-input"
            id="q2_2"
            placeholder="F = ? Н"
          />
        </div>

        <div class="question">
          <div class="question-text">
            3. На грузовой поезд массой 800 тонн действует сила тяги 1,6 МН.
            Найдите ускорение поезда.
          </div>
          <input
            type="number"
            step="0.1"
            class="answer-input"
            id="q2_3"
            placeholder="a = ? м/с²"
          />
        </div>

        <div class="question">
          <div class="question-text">
            4. Монета массой 5 г падает с ускорением 8 м/с². Какая сила
            действует на монету? Ответ в мН. (1 мН = 0,001 Н)
          </div>
          <input
            type="number"
            step="1"
            class="answer-input"
            id="q2_4"
            placeholder="F = ? мН"
          />
        </div>

        <div class="question">
          <div class="question-text">
            5. Танк массой 50 тонн разгоняется с ускорением 1,2 м/с². Найдите
            силу тяги в кН.
          </div>
          <input
            type="number"
            step="1"
            class="answer-input"
            id="q2_5"
            placeholder="F = ? кН"
          />
        </div>

        <button
          class="check-button"
          onclick="checkTest('test2', [5000, 500, 2, 40, 60])"
        >
          Проверить тест
        </button>
        <div class="result" id="result2"></div>
      </div>

      <!-- Тест 3: Торможение транспорта -->
      <div class="test-content" id="test3">
        <div class="test-title">Тест №3 - Спортивные задачи на торможение</div>

        <div class="question">
          <div class="question-text">
            1. Хоккейная шайба массой 160 г скользит по льду с начальной
            скоростью 30 м/с. Сила трения 2,4 Н. Найдите ускорение торможения.
            (1 г = 0,001 кг)
          </div>
          <input
            type="number"
            step="0.1"
            class="answer-input"
            id="q3_1"
            placeholder="a = ? м/с²"
          />
        </div>

        <div class="question">
          <div class="question-text">
            2. Лыжник массой 75 кг спускается с горы и тормозит с ускорением 3
            м/с². Какая сила торможения действует на лыжника?
          </div>
          <input
            type="number"
            step="1"
            class="answer-input"
            id="q3_2"
            placeholder="F = ? Н"
          />
        </div>

        <div class="question">
          <div class="question-text">
            3. Теннисный мяч массой 60 г летит со скоростью 40 м/с и
            останавливается за 0,02 с при ударе о ракетку. Найдите силу удара.
          </div>
          <input
            type="number"
            step="1"
            class="answer-input"
            id="q3_3"
            placeholder="F = ? Н"
          />
        </div>

        <div class="question">
          <div class="question-text">
            4. Конькобежец массой 70 кг тормозит с силой 210 Н. Если его
            начальная скорость 15 м/с, за какое время он остановится?
          </div>
          <input
            type="number"
            step="0.1"
            class="answer-input"
            id="q3_4"
            placeholder="t = ? с"
          />
        </div>

        <div class="question">
          <div class="question-text">
            5. Санки массой 12 кг съезжают с горки и тормозят с ускорением 2,5
            м/с². Найдите массу ребенка, если общая сила торможения 75 Н.
          </div>
          <input
            type="number"
            step="1"
            class="answer-input"
            id="q3_5"
            placeholder="m = ? кг"
          />
        </div>

        <button
          class="check-button"
          onclick="checkTest('test3', [15, 225, 120, 5, 18])"
        >
          Проверить тест
        </button>
        <div class="result" id="result3"></div>
      </div>

      <!-- Тест 4: Экстренное торможение -->
      <div class="test-content" id="test4">
        <div class="test-title">
          Тест №4 - Космические и промышленные задачи
        </div>

        <div class="question">
          <div class="question-text">
            1. Спутник массой 500 кг получает ускорение 0,8 м/с² от двигателей
            коррекции. Найдите силу тяги двигателей.
          </div>
          <input
            type="number"
            step="1"
            class="answer-input"
            id="q4_1"
            placeholder="F = ? Н"
          />
        </div>

        <div class="question">
          <div class="question-text">
            2. Космическая станция массой 400 тонн маневрирует с помощью
            двигателей силой 1,2 МН. Найдите ускорение станции.
          </div>
          <input
            type="number"
            step="0.1"
            class="answer-input"
            id="q4_2"
            placeholder="a = ? м/с²"
          />
        </div>

        <div class="question">
          <div class="question-text">
            3. Промышленный робот поднимает деталь массой 50 кг с ускорением 2
            м/с². Какую дополнительную силу (сверх веса) создает робот?
          </div>
          <input
            type="number"
            step="1"
            class="answer-input"
            id="q4_3"
            placeholder="F = ? Н"
          />
        </div>

        <div class="question">
          <div class="question-text">
            4. Метеорит массой 2 тонны входит в атмосферу и тормозит с
            ускорением 50 м/с². Найдите силу сопротивления воздуха в кН.
          </div>
          <input
            type="number"
            step="1"
            class="answer-input"
            id="q4_4"
            placeholder="F = ? кН"
          />
        </div>

        <div class="question">
          <div class="question-text">
            5. Лунный модуль тормозит перед посадкой с силой 15 кН и ускорением
            5 м/с². Найдите массу модуля в тоннах.
          </div>
          <input
            type="number"
            step="0.1"
            class="answer-input"
            id="q4_5"
            placeholder="m = ? т"
          />
        </div>

        <button
          class="check-button"
          onclick="checkTest('test4', [400, 3, 100, 100, 3])"
        >
          Проверить тест
        </button>
        <div class="result" id="result4"></div>
      </div>

      <!-- Отчет о прогрессе -->
      <div class="progress-report" id="progressReport">
        <div class="progress-title">📊 Отчет о прогрессе ученика</div>

        <div class="overall-stats">
          <div class="stat-card">
            <div class="stat-number" id="completedCount">0</div>
            <div class="stat-label">Выполнено тестов</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="averageGrade">0</div>
            <div class="stat-label">Средняя оценка</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="excellentCount">0</div>
            <div class="stat-label">Отличных работ</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="completionPercent">0%</div>
            <div class="stat-label">Процент выполнения</div>
          </div>
        </div>

        <div class="progress-section">
          <h3>Основы второго закона Ньютона</h3>
          <div id="forceTestsProgress"></div>
        </div>

        <div class="progress-section">
          <h3>Прикладные задачи</h3>
          <div id="brakingTestsProgress"></div>
        </div>
      </div>
    </div>

    <script>
      // Объект для хранения результатов
      let studentResults = {};

      // Инициализация даты
      document.getElementById("currentDate").textContent =
        new Date().toLocaleDateString("ru-RU");

      function toggleTest(testId) {
        // Закрыть все открытые тесты
        const allTests = document.querySelectorAll(".test-content");
        const allButtons = document.querySelectorAll(".test-button");

        allTests.forEach((test) => {
          if (test.id !== testId) {
            test.classList.remove("active");
          }
        });

        allButtons.forEach((button) => {
          if (button.getAttribute("onclick") !== `toggleTest('${testId}')`) {
            button.classList.remove("active");
          }
        });

        // Переключить выбранный тест
        const test = document.getElementById(testId);
        const button = document.querySelector(
          `[onclick="toggleTest('${testId}')"]`
        );

        if (test.classList.contains("active")) {
          test.classList.remove("active");
          button.classList.remove("active");
        } else {
          test.classList.add("active");
          button.classList.add("active");
        }
      }

      function checkTest(testId, correctAnswers) {
        const testNumber = testId.replace("test", "");
        let correctCount = 0;
        const userAnswers = [];

        for (let i = 1; i <= 5; i++) {
          const input = document.getElementById(`q${testNumber}_${i}`);
          const userAnswer = parseFloat(input.value);
          userAnswers.push(userAnswer);

          // Проверка с допуском на погрешность
          if (Math.abs(userAnswer - correctAnswers[i - 1]) < 0.5) {
            correctCount++;
            input.style.borderColor = "#48bb78";
            input.style.backgroundColor = "rgba(72, 187, 120, 0.1)";
          } else {
            input.style.borderColor = "#f56565";
            input.style.backgroundColor = "rgba(245, 101, 101, 0.1)";
          }

          // Заблокировать поле ввода после проверки
          input.disabled = true;
        }

        // Определить оценку (из 5 вопросов)
        let grade;
        if (correctCount <= 1) {
          grade = 2;
        } else if (correctCount === 2) {
          grade = 3;
        } else if (correctCount === 3 || correctCount === 4) {
          grade = 4;
        } else {
          grade = 5;
        }

        // Сохранить результат
        studentResults[testId] = {
          grade: grade,
          correctCount: correctCount,
          totalQuestions: 5,
          userAnswers: userAnswers,
          correctAnswers: correctAnswers,
          completedAt: new Date().toLocaleString("ru-RU"),
        };

        // Показать результат
        const resultDiv = document.getElementById(`result${testNumber}`);
        let message, className;

        switch (grade) {
          case 2:
            message = "Неудовлетворительно";
            className = "grade-2";
            break;
          case 3:
            message = "Удовлетворительно";
            className = "grade-3";
            break;
          case 4:
            message = "Хорошо";
            className = "grade-4";
            break;
          case 5:
            message = "Отлично";
            className = "grade-5";
            break;
        }

        resultDiv.innerHTML = `
                <div>Правильных ответов: ${correctCount} из 5</div>
                <div>Оценка: ${grade} - ${message}</div>
                <div style="margin-top: 10px; font-size: 1rem;">
                    ${
                      grade === 5
                        ? "🎉 Превосходно! Отличное знание физики!"
                        : grade >= 4
                        ? "👍 Хорошая работа! Продолжайте изучать физику!"
                        : grade === 3
                        ? "📚 Неплохо, но стоит повторить формулы!"
                        : "💪 Изучите теорию и попробуйте снова!"
                    }
                </div>
            `;

        resultDiv.className = `result show ${className}`;

        // Отметить тест как выполненный
        const button = document.querySelector(
          `[onclick="toggleTest('${testId}')"]`
        );
        button.classList.add("completed");

        // Заблокировать кнопку проверки
        const checkButton = document.querySelector(
          `[onclick="checkTest('${testId}', [${correctAnswers.join(", ")}])"]`
        );
        checkButton.disabled = true;
        checkButton.textContent = "Тест выполнен";

        // Обновить отчет о прогрессе
        updateProgressReport();
      }

      function updateProgressReport() {
        const testNames = {
          test1: "Тест №1 - Поиск массы, силы и ускорения",
          test2: "Тест №2 - Задачи с большими единицами",
          test3: "Тест №3 - Спортивные задачи на торможение",
          test4: "Тест №4 - Космические и промышленные задачи",
        };

        // Общая статистика
        const completedTests = Object.keys(studentResults);
        const totalTests = 4;
        const completedCount = completedTests.length;
        const completionPercent = Math.round(
          (completedCount / totalTests) * 100
        );

        let totalGrades = 0;
        let excellentCount = 0;

        completedTests.forEach((testId) => {
          const result = studentResults[testId];
          totalGrades += result.grade;
          if (result.grade === 5) excellentCount++;
        });

        const averageGrade =
          completedCount > 0 ? (totalGrades / completedCount).toFixed(1) : 0;

        // Обновить общую статистику
        document.getElementById("completedCount").textContent = completedCount;
        document.getElementById("averageGrade").textContent = averageGrade;
        document.getElementById("excellentCount").textContent = excellentCount;
        document.getElementById("completionPercent").textContent =
          completionPercent + "%";

        // Обновить детальные отчеты по категориям
        updateCategoryProgress(
          "forceTestsProgress",
          ["test1", "test2"],
          testNames
        );
        updateCategoryProgress(
          "brakingTestsProgress",
          ["test3", "test4"],
          testNames
        );
      }

      function updateCategoryProgress(containerId, testIds, testNames) {
        const container = document.getElementById(containerId);
        container.innerHTML = "";

        testIds.forEach((testId) => {
          const progressItem = document.createElement("div");
          progressItem.className = "progress-item";

          if (studentResults[testId]) {
            const result = studentResults[testId];
            progressItem.classList.add("completed");
            progressItem.innerHTML = `
                        <div>
                            <div>${testNames[testId]}</div>
                            <small style="color: #bdc3c7;">Выполнено: ${result.completedAt} | Правильных: ${result.correctCount}/5</small>
                        </div>
                        <div class="progress-grade grade-badge-${result.grade}">${result.grade}</div>
                    `;
          } else {
            progressItem.classList.add("not-completed");
            progressItem.innerHTML = `
                        <div>${testNames[testId]}</div>
                        <div style="color: #95a5a6;">Не выполнено</div>
                    `;
          }

          container.appendChild(progressItem);
        });
      }

      // Инициализация отчета при загрузке страницы
      updateProgressReport();
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'992f1b6126926e90',t:'MTc2MTIwMDIwMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
